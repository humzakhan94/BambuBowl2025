<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Football Stats 2025</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
const { useState, useEffect } = React;

// Simple SVG icons
const TrendingUp = ({size=20,className=""}) => <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>;
const TrendingDown = ({size=20,className=""}) => <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="23 18 13.5 8.5 8.5 13.5 1 6"/><polyline points="17 18 23 18 23 12"/></svg>;
const Download = ({size=48,className=""}) => <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>;
const Award = ({size=16}) => <span>üèÜ</span>;
const Target = ({size=16}) => <span>üéØ</span>;
const Zap = ({size=16}) => <span>‚ö°</span>;
const Users = ({size=16}) => <span>üë•</span>;
const BarChart3 = ({size=16}) => <span>üìä</span>;
const Trophy = ({size=16}) => <span>üèÜ</span>;
const Star = ({size=16}) => <span>‚≠ê</span>;

function FantasyStatsApp() {
  const [stats, setStats] = useState(null);
  const [tab, setTab] = useState('overview');
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [allowManualUpload, setAllowManualUpload] = useState(false);

  // Auto-load stats.json on mount
  useEffect(() => {
    fetch('stats.json')
      .then(response => {
        if (!response.ok) {
          throw new Error('stats.json not found');
        }
        return response.json();
      })
      .then(data => {
        setStats(data);
        setLoading(false);
      })
      .catch(err => {
        console.error('Error loading stats.json:', err);
        setError(err.message);
        setLoading(false);
        setAllowManualUpload(true);
      });
  }, []);

  const handleFileUpload = (e) => {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = (ev) => {
      try {
        setStats(JSON.parse(ev.target.result));
        setError(null);
      } catch (err) {
        alert('Error: ' + err.message);
      }
    };
    reader.readAsText(file);
  };

  if (loading) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white flex items-center justify-center p-4">
        <div className="max-w-2xl w-full bg-white/10 backdrop-blur rounded-xl p-8 border border-purple-500/30 text-center">
          <h1 className="text-4xl font-bold mb-4 bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent">
            Fantasy Football Stats
          </h1>
          <p className="text-purple-300">Loading stats...</p>
        </div>
      </div>
    );
  }

  if (error && !stats) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white flex items-center justify-center p-4">
        <div className="max-w-2xl w-full bg-white/10 backdrop-blur rounded-xl p-8 border border-purple-500/30">
          <h1 className="text-4xl font-bold mb-4 text-center bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent">
            Fantasy Football Stats
          </h1>
          {allowManualUpload ? (
            <div>
              <p className="text-red-400 text-center mb-4">Could not auto-load stats.json</p>
              <div className="border-2 border-dashed border-purple-500/50 rounded-lg p-8 text-center">
                <input type="file" accept=".json" onChange={handleFileUpload} className="hidden" id="file" />
                <label htmlFor="file" className="cursor-pointer">
                  <Download className="mx-auto mb-4 text-purple-400" size={48} />
                  <p className="text-lg font-semibold">Upload JSON File</p>
                  <p className="text-sm text-purple-300 mt-2">Upload your stats JSON file manually</p>
                </label>
              </div>
            </div>
          ) : (
            <p className="text-purple-300 text-center">Error loading stats. Please contact your league administrator.</p>
          )}
        </div>
      </div>
    );
  }

  const tabs = [
    { id: 'overview', name: 'Overview', icon: Award },
    { id: 'efficiency', name: 'Efficiency', icon: Target },
    { id: 'schedule', name: 'Schedule', icon: TrendingUp },
    { id: 'consistency', name: 'Consistency', icon: Zap },
    { id: 'trades', name: 'Trades', icon: Users },
    { id: 'waivers', name: 'Waivers', icon: Star },
    { id: 'draft', name: 'Draft', icon: Trophy },
    { id: 'playoffs', name: 'Playoffs', icon: Trophy },
    { id: 'whatif', name: 'What If?', icon: BarChart3 },
    { id: 'awards', name: 'Awards', icon: Award },
    { id: 'help', name: 'Help', icon: BarChart3 }
  ];

  const Card = ({ children, title, className = '' }) => (
    <div className={`bg-white/10 rounded-xl p-6 border border-purple-500/30 ${className}`}>
      {title && <h2 className="text-2xl font-bold mb-4">{title}</h2>}
      {children}
    </div>
  );

  const RankItem = ({ rank, name, value, sub, isNegative }) => (
    <div className="flex justify-between py-2 border-b border-purple-500/20">
      <div className="flex items-center gap-2">
        <span className={`font-bold ${rank <= 3 ? 'text-yellow-400' : 'text-purple-400'}`}>#{rank}</span>
        <div>
          <div className="font-semibold">{name}</div>
          {sub && <div className="text-xs text-purple-300">{sub}</div>}
        </div>
      </div>
      <span className={`font-bold ${isNegative ? 'text-red-400' : 'text-green-400'}`}>{value}</span>
    </div>
  );

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white p-4">
      <div className="max-w-7xl mx-auto">
        <div className="text-center mb-6">
          <h1 className="text-4xl font-bold mb-2 bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent">
            {stats.league_name}
          </h1>
          <p className="text-purple-300">2025 Season Analytics</p>
        </div>

        <div className="flex flex-wrap gap-2 mb-6 justify-center">
          {tabs.map(t => (
            <button
              key={t.id}
              onClick={() => setTab(t.id)}
              className={`flex items-center gap-2 px-3 py-2 rounded-lg font-semibold text-sm ${
                tab === t.id ? 'bg-purple-600' : 'bg-white/10 hover:bg-white/20'
              }`}
            >
              <t.icon size={16} />
              {t.name}
            </button>
          ))}
        </div>

        {tab === 'overview' && (
          <div className="max-w-2xl mx-auto space-y-3">
            <div className="grid gap-3 grid-cols-3">
              <div className="bg-white/10 rounded-lg p-3 border border-purple-500/30 text-center">
                <h3 className="font-bold mb-1 text-xs text-purple-300">Top Scorer</h3>
                <div className="text-lg font-bold text-green-400">
                  {[...stats.teams].sort((a,b) => b.points_for - a.points_for)[0]?.name}
                </div>
                <p className="text-xs text-purple-300 mt-1">
                  {[...stats.teams].sort((a,b) => b.points_for - a.points_for)[0]?.points_for} pts
                </p>
              </div>
              <div className="bg-white/10 rounded-lg p-3 border border-purple-500/30 text-center">
                <h3 className="font-bold mb-1 text-xs text-purple-300">Best Manager</h3>
                <div className="text-lg font-bold text-blue-400">
                  {[...stats.teams].sort((a,b) => b.efficiency - a.efficiency)[0]?.name}
                </div>
                <p className="text-xs text-purple-300 mt-1">
                  {[...stats.teams].sort((a,b) => b.efficiency - a.efficiency)[0]?.efficiency}%
                </p>
              </div>
              <div className="bg-white/10 rounded-lg p-3 border border-purple-500/30 text-center">
                <h3 className="font-bold mb-1 text-xs text-purple-300">Luckiest</h3>
                <div className="text-lg font-bold text-green-400">
                  {[...stats.teams].sort((a,b) => b.schedule_luck - a.schedule_luck)[0]?.name}
                </div>
                <p className="text-xs text-purple-300 mt-1">
                  +{[...stats.teams].sort((a,b) => b.schedule_luck - a.schedule_luck)[0]?.schedule_luck} wins
                </p>
              </div>
            </div>
            
            <div className="grid gap-3 grid-cols-2">
              {stats.biggest_blowout && (
                <div className="bg-white/10 rounded-lg p-3 border border-purple-500/30 text-center">
                  <h3 className="font-bold mb-1 text-xs text-purple-300">Biggest Blowout</h3>
                  <div className="text-lg font-bold text-green-400">{stats.biggest_blowout.winner}</div>
                  <div className="text-xs text-purple-200 mt-1">
                    vs {stats.biggest_blowout.loser}
                  </div>
                  <div className="text-xs text-purple-300 mt-1">
                    Week {stats.biggest_blowout.week}
                  </div>
                  <div className="text-sm font-bold text-red-400 mt-1">
                    {stats.biggest_blowout.margin} pt margin
                  </div>
                </div>
              )}
              {stats.closest_matchup && (
                <div className="bg-white/10 rounded-lg p-3 border border-purple-500/30 text-center">
                  <h3 className="font-bold mb-1 text-xs text-purple-300">Closest Matchup</h3>
                  <div className="text-lg font-bold text-yellow-400">{stats.closest_matchup.winner}</div>
                  <div className="text-xs text-purple-200 mt-1">
                    vs {stats.closest_matchup.loser}
                  </div>
                  <div className="text-xs text-purple-300 mt-1">
                    Week {stats.closest_matchup.week}
                  </div>
                  <div className="text-sm font-bold text-green-400 mt-1">
                    {stats.closest_matchup.margin} pt margin
                  </div>
                </div>
              )}
            </div>
          </div>
        )}

        {tab === 'efficiency' && (
          <div className="max-w-4xl mx-auto">
            <Card title="Lineup Efficiency - All Teams">
            <p className="text-purple-300 text-sm mb-4">How well you set your lineup vs optimal possible</p>
            {[...stats.teams].sort((a,b) => b.efficiency - a.efficiency).map((t, i) => (
              <div key={t.name} className="mb-4 p-3 bg-white/5 rounded">
                <div className="flex justify-between mb-2">
                  <div className="flex items-center gap-2">
                    <span className={`font-bold ${i < 3 ? 'text-yellow-400' : 'text-purple-400'}`}>#{i+1}</span>
                    <span className="font-semibold">{t.name}</span>
                  </div>
                  <span className="text-xl font-bold text-green-400">{t.efficiency}%</span>
                </div>
                <div className="w-full bg-gray-700 rounded-full h-3 mb-2">
                  <div className="bg-gradient-to-r from-green-500 to-emerald-400 h-3 rounded-full" style={{ width: `${Math.min(t.efficiency, 100)}%` }}></div>
                </div>
                <div className="text-xs text-red-300">Points left on bench: {t.points_left}</div>
              </div>
            ))}
          </Card>
          </div>
        )}

        {tab === 'schedule' && (
          <div className="space-y-4 max-w-4xl mx-auto">
            <Card title="Schedule Luck">
              <p className="text-purple-300 text-sm mb-4">Expected wins based on points scored vs actual record</p>
              {[...stats.teams].sort((a,b) => b.schedule_luck - a.schedule_luck).map((t, i) => (
                <div key={t.name} className="mb-3 p-3 bg-white/5 rounded">
                  <div className="flex justify-between items-center mb-2">
                    <div className="flex items-center gap-2">
                      <span className={`font-bold ${i < 3 ? 'text-yellow-400' : 'text-purple-400'}`}>#{i+1}</span>
                      <span className="font-semibold">{t.name}</span>
                    </div>
                    <div className="flex items-center gap-2">
                      {t.schedule_luck > 0 ? <TrendingUp className="text-green-400" size={20} /> : <TrendingDown className="text-red-400" size={20} />}
                      <span className={`text-xl font-bold ${t.schedule_luck > 0 ? 'text-green-400' : 'text-red-400'}`}>
                        {t.schedule_luck > 0 ? '+' : ''}{t.schedule_luck}
                      </span>
                    </div>
                  </div>
                  <div className="grid grid-cols-2 gap-4 text-sm">
                    <div><span className="text-purple-300">Actual: </span><span className="font-bold">{t.wins}W</span></div>
                    <div><span className="text-purple-300">Expected: </span><span className="font-bold">{t.expected_wins}W</span></div>
                  </div>
                </div>
              ))}
            </Card>

            <Card title="Strength of Schedule">
              <p className="text-purple-300 text-sm mb-4">Average points scored against you (higher = tougher schedule)</p>
              {[...stats.teams].sort((a,b) => b.strength_of_schedule - a.strength_of_schedule).map((t, i) => (
                <div key={t.name} className="mb-3 p-3 bg-white/5 rounded">
                  <div className="flex justify-between items-center">
                    <div className="flex items-center gap-2">
                      <span className={`font-bold ${i < 3 ? 'text-yellow-400' : 'text-purple-400'}`}>#{i+1}</span>
                      <span className="font-semibold">{t.name}</span>
                    </div>
                    <div className="text-right">
                      <div className="text-xl font-bold text-red-400">{t.strength_of_schedule}</div>
                      <div className="text-xs text-purple-300">avg pts against/week</div>
                    </div>
                  </div>
                </div>
              ))}
            </Card>
          </div>
        )}

        {tab === 'consistency' && (
          <div className="max-w-4xl mx-auto">
            <Card title="Consistency">
            <p className="text-purple-300 text-sm mb-4">Higher = predictable, Lower = boom/bust</p>
            {[...stats.teams].sort((a,b) => b.consistency - a.consistency).map((t, i) => (
              <div key={t.name} className="mb-3 p-3 bg-white/5 rounded">
                <div className="flex justify-between items-center mb-2">
                  <div className="flex items-center gap-2">
                    <span className={`font-bold ${i < 3 ? 'text-yellow-400' : 'text-purple-400'}`}>#{i+1}</span>
                    <span className="font-semibold">{t.name}</span>
                  </div>
                  <span className="text-xl font-bold text-blue-400">{t.consistency}</span>
                </div>
                <div className="grid grid-cols-4 gap-2 text-sm">
                  <div><div className="text-purple-300">Avg</div><div className="font-bold">{t.avg_points}</div></div>
                  <div><div className="text-purple-300">Std Dev</div><div className="font-bold">{t.std_dev}</div></div>
                  <div><div className="text-green-300">High</div><div className="font-bold text-green-400">{t.high_score}</div></div>
                  <div><div className="text-red-300">Low</div><div className="font-bold text-red-400">{t.low_score}</div></div>
                </div>
              </div>
            ))}
          </Card>
          </div>
        )}

        {tab === 'trades' && (
          <div className="space-y-4 max-w-4xl mx-auto">
            <Card title="Net Trade Performance">
              {stats.net_trade_performance?.map((t, i) => (
                <RankItem key={t.team} rank={i+1} name={t.team} value={`${t.net_points > 0 ? '+' : ''}${t.net_points}`} sub={`${t.trades_made} trades`} isNegative={t.net_points < 0} />
              ))}
            </Card>
            <Card title="All Trades">
              {stats.all_trades?.map((t, i) => (
                <div key={i} className="mb-3 p-3 bg-white/5 rounded">
                  <div className="flex justify-between mb-1">
                    <span className="font-bold">{t.team}</span>
                    <span className={`font-bold ${t.net_points > 0 ? 'text-green-400' : 'text-red-400'}`}>{t.net_points > 0 ? '+' : ''}{t.net_points}</span>
                  </div>
                  <div className="text-xs text-green-300">+ {t.players_gained?.join(', ')}</div>
                  <div className="text-xs text-red-300">- {t.players_lost?.join(', ')}</div>
                </div>
              ))}
            </Card>
          </div>
        )}

        {tab === 'waivers' && (
          <div className="max-w-4xl mx-auto space-y-4">
            <Card title="Team Waiver Wire Activity">
              <p className="text-purple-300 text-sm mb-4">Total adds and efficiency on the waiver wire</p>
              {stats.team_waiver_activity?.map((t, i) => (
                <div key={t.team} className="mb-3 p-3 bg-white/5 rounded">
                  <div className="flex justify-between items-center mb-2">
                    <div className="flex items-center gap-2">
                      <span className={`font-bold ${i < 3 ? 'text-yellow-400' : 'text-purple-400'}`}>#{i+1}</span>
                      <span className="font-semibold">{t.team}</span>
                    </div>
                    <span className="text-xl font-bold text-green-400">{t.total_points} pts</span>
                  </div>
                  <div className="grid grid-cols-2 gap-4 text-sm">
                    <div>
                      <div className="text-purple-300">Total Adds</div>
                      <div className="font-bold">{t.total_adds}</div>
                    </div>
                    <div>
                      <div className="text-purple-300">Avg Per Add</div>
                      <div className="font-bold text-blue-400">{t.avg_per_add} pts</div>
                    </div>
                  </div>
                </div>
              ))}
            </Card>
            
            <Card title="Best Waiver Pickups">
              <p className="text-purple-300 text-sm mb-4">Players kept through Week 17, never traded</p>
              {stats.best_waiver_pickups?.map((p, i) => (
                <RankItem key={i} rank={i+1} name={p.player} value={p.total_points} sub={`${p.team} ‚Ä¢ Week ${p.week}`} />
              ))}
            </Card>
          </div>
        )}

        {tab === 'draft' && (
          <div className="space-y-3">
            <div className="max-w-4xl mx-auto">
              <Card title="Top 30 Scorers vs Draft Order">
                <p className="text-purple-300 text-sm mb-4">Actual performance vs draft position - see the hits and misses</p>
                {!stats.scorers_vs_draft || !stats.scorers_vs_draft.top_scorers ? (
                  <div className="text-center text-purple-400 py-8">
                    <p className="mb-2">No comparison data found.</p>
                    <p className="text-xs">Re-run the Python script to generate this data.</p>
                  </div>
                ) : (
                  <div className="flex gap-3">
                  <div className="flex-1 bg-white/5 rounded-lg p-3">
                    <h3 className="font-bold text-green-400 mb-2 text-center">Actual Top 30 Scorers</h3>
                    <div>
                      {stats.scorers_vs_draft.top_scorers.map((player, i) => (
                        <div key={i} className="flex items-center py-1 px-2 border-b border-purple-500/20">
                          <span className="font-bold text-green-400 text-sm w-8 flex-shrink-0">#{i+1}</span>
                          <div className="flex-1 min-w-0 ml-2">
                            <div className="font-semibold text-sm truncate">{player.player}</div>
                            <div className="text-xs text-purple-300">
                              {player.finish_position} ‚Ä¢ {player.total_points} pts
                              {player.drafted && (
                                <span className="ml-1 text-blue-300">
                                  (Pick {player.drafted.pick})
                                </span>
                              )}
                              {!player.drafted && <span className="ml-1 text-red-400">(FA)</span>}
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>

                  <div className="flex-1 bg-white/5 rounded-lg p-3">
                    <h3 className="font-bold text-blue-400 mb-2 text-center">Draft Order (First 30)</h3>
                    <div>
                      {stats.scorers_vs_draft.draft_order.map((pick, i) => {
                        const isTopScorer = pick.total_points > 200;
                        const isBust = pick.round <= 3 && pick.total_points < 100;
                        const textColor = isBust ? 'text-red-400' : isTopScorer ? 'text-green-400' : 'text-white';
                        
                        return (
                          <div key={i} className="flex items-center py-1 px-2 border-b border-purple-500/20">
                            <span className="font-bold text-blue-400 text-sm w-8 flex-shrink-0">#{pick.pick}</span>
                            <div className="flex-1 min-w-0 ml-2">
                              <div className={`font-semibold text-sm truncate ${textColor}`}>{pick.player}</div>
                              <div className="text-xs text-purple-300 flex items-center gap-1">
                                <span className="truncate">{pick.team}</span>
                                <span className="flex-shrink-0">‚Ä¢ {pick.round}.{pick.pick}</span>
                                <span className={`flex-shrink-0 ${textColor}`}>‚Ä¢ {pick.total_points} pts</span>
                                {isBust && <span className="flex-shrink-0">‚ùå</span>}
                                {isTopScorer && <span className="flex-shrink-0">‚úÖ</span>}
                              </div>
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                </div>
              )}
            </Card>
            </div>

            <div className="grid md:grid-cols-2 gap-3 max-w-4xl mx-auto">
              <Card title="Draft Steals">
                <p className="text-purple-300 text-sm mb-4">Late round picks who delivered big value</p>
                {stats.draft_steals?.map((p, i) => (
                  <div key={i} className="flex justify-between items-center py-2 border-b border-purple-500/20">
                    <div className="flex items-center gap-2 flex-1 min-w-0">
                      <span className={`font-bold ${i < 3 ? 'text-yellow-400' : 'text-purple-400'}`}>#{i+1}</span>
                      <div className="flex-1 min-w-0">
                        <div className="font-semibold text-green-400 truncate">{p.player}</div>
                        <div className="text-xs text-purple-300 truncate">{p.team} ‚Ä¢ Pick {p.adp} ‚Üí {p.finish_position}</div>
                      </div>
                    </div>
                    <span className="font-bold text-green-400 ml-2 flex-shrink-0">{p.total_points}</span>
                  </div>
                ))}
              </Card>
              
              <Card title="Draft Busts">
                <p className="text-purple-300 text-sm mb-4">Early picks that underperformed</p>
                {stats.draft_busts?.map((p, i) => (
                  <div key={i} className="flex justify-between items-center py-2 border-b border-purple-500/20">
                    <div className="flex items-center gap-2 flex-1 min-w-0">
                      <span className={`font-bold ${i < 3 ? 'text-red-400' : 'text-purple-400'}`}>#{i+1}</span>
                      <div className="flex-1 min-w-0">
                        <div className="font-semibold text-red-400 truncate">{p.player}</div>
                        <div className="text-xs text-purple-300 truncate">{p.team} ‚Ä¢ Pick {p.adp} ‚Üí {p.finish_position}</div>
                      </div>
                    </div>
                    <span className="font-bold text-red-400 ml-2 flex-shrink-0">{p.total_points}</span>
                  </div>
                ))}
              </Card>
            </div>
          </div>
        )}

        {tab === 'playoffs' && (
          <div className="space-y-4 max-w-4xl mx-auto">
            <div className="grid gap-3 grid-cols-2 max-w-2xl mx-auto">
              {stats.best_playoff_week && (
                <div className="bg-white/10 rounded-lg p-3 border border-purple-500/30 text-center">
                  <h3 className="font-bold mb-1 text-xs text-green-300">Best Playoff Week</h3>
                  <div className="text-lg font-bold text-green-400">{stats.best_playoff_week.team}</div>
                  <div className="text-xs text-purple-300 mt-1">Week {stats.best_playoff_week.week}</div>
                  <div className="text-sm font-bold text-green-400 mt-1">{stats.best_playoff_week.points} pts</div>
                </div>
              )}
              {stats.worst_playoff_week && (
                <div className="bg-white/10 rounded-lg p-3 border border-purple-500/30 text-center">
                  <h3 className="font-bold mb-1 text-xs text-red-300">Worst Playoff Week</h3>
                  <div className="text-lg font-bold text-red-400">{stats.worst_playoff_week.team}</div>
                  <div className="text-xs text-purple-300 mt-1">Week {stats.worst_playoff_week.week}</div>
                  <div className="text-sm font-bold text-red-400 mt-1">{stats.worst_playoff_week.points} pts</div>
                </div>
              )}
            </div>

            <Card title="Team Playoff Performance (Weeks 15-17)">
              <p className="text-purple-300 text-sm mb-4">Total points scored during playoff weeks</p>
              {stats.team_playoff_rankings?.map((t, i) => (
                <div key={t.team} className="mb-3 p-3 bg-white/5 rounded">
                  <div className="flex justify-between items-center mb-2">
                    <div className="flex items-center gap-2">
                      <span className={`font-bold ${i < 3 ? 'text-yellow-400' : 'text-purple-400'}`}>#{i+1}</span>
                      <div>
                        <span className="font-semibold">{t.team}</span>
                        <div className="text-xs text-purple-400">
                          {t.weeks_played} {t.weeks_played === 1 ? 'week' : 'weeks'} played
                        </div>
                      </div>
                    </div>
                    <div className="flex items-center gap-2">
                      {t.diff_from_regular > 0 ? <TrendingUp className="text-green-400" size={18} /> : <TrendingDown className="text-red-400" size={18} />}
                      <span className="text-xl font-bold text-green-400">{t.playoff_total} pts</span>
                    </div>
                  </div>
                  <div className="grid grid-cols-3 gap-2 text-xs">
                    <div>
                      <div className="text-purple-300">Playoff Avg</div>
                      <div className="font-bold">{t.playoff_avg}</div>
                    </div>
                    <div>
                      <div className="text-purple-300">Season Avg</div>
                      <div className="font-bold">{t.regular_avg}</div>
                    </div>
                    <div>
                      <div className="text-purple-300">Difference</div>
                      <div className={`font-bold ${t.diff_from_regular > 0 ? 'text-green-400' : 'text-red-400'}`}>
                        {t.diff_from_regular > 0 ? '+' : ''}{t.diff_from_regular}
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </Card>

            <Card title="Playoff Consistency">
              <p className="text-purple-300 text-sm mb-4">Most consistent teams during playoff weeks</p>
              {stats.team_playoff_consistency?.map((t, i) => (
                <div key={t.team} className="mb-3 p-3 bg-white/5 rounded">
                  <div className="flex justify-between items-center mb-2">
                    <div className="flex items-center gap-2">
                      <span className={`font-bold ${i < 3 ? 'text-yellow-400' : 'text-purple-400'}`}>#{i+1}</span>
                      <span className="font-semibold">{t.team}</span>
                    </div>
                    <span className="text-xl font-bold text-blue-400">{t.consistency}</span>
                  </div>
                  <div className="grid grid-cols-2 gap-4 text-xs">
                    <div>
                      <div className="text-purple-300">Avg Points</div>
                      <div className="font-bold">{t.avg_points}</div>
                    </div>
                    <div>
                      <div className="text-purple-300">Std Dev</div>
                      <div className="font-bold">{t.std_dev}</div>
                    </div>
                  </div>
                </div>
              ))}
            </Card>

            <Card title="Best Playoff Player Performers (Weeks 15-17)">
              <p className="text-purple-300 text-sm mb-4">Includes free agents - shows who you missed!</p>
              {stats.playoff_performers?.map((p, i) => (
                <div key={i} className="flex justify-between py-2 border-b border-purple-500/20">
                  <div className="flex items-center gap-2">
                    <span className={`font-bold ${i < 3 ? 'text-yellow-400' : 'text-purple-400'}`}>#{i+1}</span>
                    <div>
                      <div className="font-semibold">{p.player}</div>
                      <div className="text-xs text-purple-300">
                        {p.is_free_agent ? <span className="text-red-400">FREE AGENT</span> : p.team} ‚Ä¢ {p.avg_per_week}/wk
                      </div>
                    </div>
                  </div>
                  <span className="font-bold text-green-400">{p.total_points}</span>
                </div>
              ))}
            </Card>
          </div>
        )}

        {tab === 'whatif' && (
          <div className="space-y-4 max-w-4xl mx-auto">
            <Card title="Draft Do-Over (Regular Season)">
              <p className="text-purple-300 text-sm mb-4">If everyone drafted best available player (based on actual performance)</p>
              {stats.draft_do_over?.map((t, i) => (
                <div key={t.team} className="mb-3 p-3 bg-white/5 rounded">
                  <div className="flex justify-between items-center mb-2">
                    <div className="flex items-center gap-2">
                      <span className={`font-bold ${i < 3 ? 'text-yellow-400' : 'text-purple-400'}`}>#{i+1}</span>
                      <span className="font-semibold">{t.team}</span>
                    </div>
                    <div className="text-right">
                      <div className="text-xl font-bold text-purple-400">+{t.points_improvement} pts</div>
                      <div className="text-xs text-purple-300">improvement</div>
                    </div>
                  </div>
                  <div className="grid grid-cols-3 gap-2 text-sm">
                    <div>
                      <div className="text-purple-300">Optimal Record</div>
                      <div className="font-bold text-green-400">{t.optimal_draft_wins}-{t.optimal_draft_losses}</div>
                    </div>
                    <div>
                      <div className="text-purple-300">Actual Record</div>
                      <div className="font-bold">{t.actual_wins}-{t.actual_losses}</div>
                    </div>
                    <div>
                      <div className="text-purple-300">Draft Points</div>
                      <div className="font-bold text-blue-400">{t.optimal_draft_points}</div>
                    </div>
                  </div>
                </div>
              ))}
            </Card>

            <Card title="Optimal Lineup Record (Regular Season)">
              <p className="text-purple-300 text-sm mb-4">If you set the perfect lineup every week (Weeks 1-14)</p>
              {stats.what_if_scenarios?.sort((a,b) => b.optimal_wins - a.optimal_wins).map((t, i) => (
                <div key={t.team} className="mb-3 p-3 bg-white/5 rounded">
                  <div className="flex justify-between items-center">
                    <div className="flex items-center gap-2">
                      <span className={`font-bold ${i < 3 ? 'text-yellow-400' : 'text-purple-400'}`}>#{i+1}</span>
                      <span className="font-semibold">{t.team}</span>
                    </div>
                    <div className="text-right">
                      <div className="text-xl font-bold text-green-400">{t.optimal_wins}-{t.optimal_losses}</div>
                      <div className="text-xs text-purple-300">Actual: {t.actual_wins}-{t.actual_losses}</div>
                    </div>
                  </div>
                </div>
              ))}
            </Card>

            <Card title="All-Play Record (Regular Season)">
              <p className="text-purple-300 text-sm mb-4">Record if you played everyone each week (Weeks 1-14)</p>
              {stats.what_if_scenarios?.sort((a,b) => {
                const aPct = a.all_play_wins / (a.all_play_wins + a.all_play_losses);
                const bPct = b.all_play_wins / (b.all_play_wins + b.all_play_losses);
                return bPct - aPct;
              }).map((t, i) => {
                const totalGames = t.all_play_wins + t.all_play_losses;
                const winPct = totalGames > 0 ? (t.all_play_wins / totalGames * 100).toFixed(1) : 0;
                return (
                  <div key={t.team} className="mb-3 p-3 bg-white/5 rounded">
                    <div className="flex justify-between items-center">
                      <div className="flex items-center gap-2">
                        <span className={`font-bold ${i < 3 ? 'text-yellow-400' : 'text-purple-400'}`}>#{i+1}</span>
                        <span className="font-semibold">{t.team}</span>
                      </div>
                      <div className="text-right">
                        <div className="text-xl font-bold text-blue-400">{t.all_play_wins}-{t.all_play_losses}</div>
                        <div className="text-xs text-purple-300">{winPct}% win rate</div>
                      </div>
                    </div>
                  </div>
                );
              })}
            </Card>

            <Card title="Worst Possible Record (Regular Season)">
              <p className="text-purple-300 text-sm mb-4">If you benched your best players every week (Weeks 1-14)</p>
              {stats.what_if_scenarios?.sort((a,b) => a.worst_wins - b.worst_wins).map((t, i) => (
                <div key={t.team} className="mb-3 p-3 bg-white/5 rounded">
                  <div className="flex justify-between items-center">
                    <div className="flex items-center gap-2">
                      <span className={`font-bold ${i < 3 ? 'text-red-400' : 'text-purple-400'}`}>#{i+1}</span>
                      <span className="font-semibold">{t.team}</span>
                    </div>
                    <div className="text-right">
                      <div className="text-xl font-bold text-red-400">{t.worst_wins}-{t.worst_losses}</div>
                      <div className="text-xs text-purple-300">Actual: {t.actual_wins}-{t.actual_losses}</div>
                    </div>
                  </div>
                </div>
              ))}
            </Card>
          </div>
        )}

        {tab === 'awards' && stats.awards && (
          <div className="grid gap-3 grid-cols-2 md:grid-cols-4 max-w-5xl mx-auto">
            {stats.awards.mvp_pickup && (
              <div className="bg-gradient-to-br from-yellow-900/30 to-yellow-700/30 rounded-lg p-3 border border-yellow-500/50 text-center min-h-[120px] flex flex-col justify-center">
                <h3 className="font-semibold mb-1 text-xs text-yellow-300">MVP Pickup</h3>
                <div className="text-sm font-bold text-yellow-400">{stats.awards.mvp_pickup.player}</div>
                <div className="text-xs text-purple-200 mt-1">{stats.awards.mvp_pickup.team}</div>
                <div className="text-xs text-purple-400 mt-1 italic">Best waiver pickup</div>
              </div>
            )}
            {stats.awards.draft_steal && (
              <div className="bg-gradient-to-br from-green-900/30 to-green-700/30 rounded-lg p-3 border border-green-500/50 text-center min-h-[120px] flex flex-col justify-center">
                <h3 className="font-semibold mb-1 text-xs text-green-300">Draft Steal</h3>
                <div className="text-sm font-bold text-green-400">{stats.awards.draft_steal.player}</div>
                <div className="text-xs text-purple-200 mt-1">{stats.awards.draft_steal.team}</div>
                <div className="text-xs text-purple-400 mt-1 italic">Late round gem</div>
              </div>
            )}
            {stats.awards.draft_bust && (
              <div className="bg-gradient-to-br from-red-900/30 to-red-700/30 rounded-lg p-3 border border-red-500/50 text-center min-h-[120px] flex flex-col justify-center">
                <h3 className="font-semibold mb-1 text-xs text-red-300">Draft Bust</h3>
                <div className="text-sm font-bold text-red-400">{stats.awards.draft_bust.player}</div>
                <div className="text-xs text-purple-400 mt-1 italic">Early round flop</div>
              </div>
            )}
            {stats.awards.taco && (
              <div className="bg-gradient-to-br from-orange-900/30 to-orange-700/30 rounded-lg p-3 border border-orange-500/50 text-center min-h-[120px] flex flex-col justify-center">
                <h3 className="font-semibold mb-1 text-xs text-orange-300">League Taco</h3>
                <div className="text-sm font-bold text-orange-400">{stats.awards.taco.team}</div>
                <div className="text-xs text-purple-400 mt-1 italic">Worst lineup management</div>
              </div>
            )}
            {stats.awards.consistency_king && (
              <div className="bg-gradient-to-br from-blue-900/30 to-blue-700/30 rounded-lg p-3 border border-blue-500/50 text-center min-h-[120px] flex flex-col justify-center">
                <h3 className="font-semibold mb-1 text-xs text-blue-300">Consistency King</h3>
                <div className="text-sm font-bold text-blue-400">{stats.awards.consistency_king.team}</div>
                <div className="text-xs text-purple-400 mt-1 italic">Most predictable</div>
              </div>
            )}
            {stats.awards.boom_bust_king && (
              <div className="bg-gradient-to-br from-purple-900/30 to-purple-700/30 rounded-lg p-3 border border-purple-500/50 text-center min-h-[120px] flex flex-col justify-center">
                <h3 className="font-semibold mb-1 text-xs text-purple-300">Boom/Bust King</h3>
                <div className="text-sm font-bold text-purple-400">{stats.awards.boom_bust_king.team}</div>
                <div className="text-xs text-purple-400 mt-1 italic">Most volatile scores</div>
              </div>
            )}
            {stats.awards.dominance && (
              <div className="bg-gradient-to-br from-indigo-900/30 to-indigo-700/30 rounded-lg p-3 border border-indigo-500/50 text-center min-h-[120px] flex flex-col justify-center">
                <h3 className="font-semibold mb-1 text-xs text-indigo-300">Dominance</h3>
                <div className="text-sm font-bold text-indigo-400">{stats.awards.dominance.team}</div>
                <div className="text-xs text-purple-200 mt-1">{stats.awards.dominance.weekly_wins} weekly wins</div>
                <div className="text-xs text-purple-400 mt-1 italic">Most #1 finishes</div>
              </div>
            )}
            {stats.awards.cardiac_kid && (
              <div className="bg-gradient-to-br from-pink-900/30 to-pink-700/30 rounded-lg p-3 border border-pink-500/50 text-center min-h-[120px] flex flex-col justify-center">
                <h3 className="font-semibold mb-1 text-xs text-pink-300">Cardiac Kid</h3>
                <div className="text-sm font-bold text-pink-400">{stats.awards.cardiac_kid.team}</div>
                <div className="text-xs text-purple-200 mt-1">{stats.awards.cardiac_kid.close_wins} close wins</div>
                <div className="text-xs text-purple-400 mt-1 italic">Most wins by &lt;5 pts</div>
              </div>
            )}
            {stats.awards.heartbreaker && (
              <div className="bg-gradient-to-br from-rose-900/30 to-rose-700/30 rounded-lg p-3 border border-rose-500/50 text-center min-h-[120px] flex flex-col justify-center">
                <h3 className="font-semibold mb-1 text-xs text-rose-300">Heartbreaker</h3>
                <div className="text-sm font-bold text-rose-400">{stats.awards.heartbreaker.team}</div>
                <div className="text-xs text-purple-200 mt-1">{stats.awards.heartbreaker.close_losses} close losses</div>
                <div className="text-xs text-purple-400 mt-1 italic">Most losses by &lt;5 pts</div>
              </div>
            )}
            {stats.awards.vulture && (
              <div className="bg-gradient-to-br from-emerald-900/30 to-emerald-700/30 rounded-lg p-3 border border-emerald-500/50 text-center min-h-[120px] flex flex-col justify-center">
                <h3 className="font-semibold mb-1 text-xs text-emerald-300">The Vulture</h3>
                <div className="text-sm font-bold text-emerald-400">{stats.awards.vulture.team}</div>
                <div className="text-xs text-purple-200 mt-1">{stats.awards.vulture.wins_below_avg} wins below avg</div>
                <div className="text-xs text-purple-400 mt-1 italic">Won with low scores</div>
              </div>
            )}
            {stats.awards.point_miser && (
              <div className="bg-gradient-to-br from-amber-900/30 to-amber-700/30 rounded-lg p-3 border border-amber-500/50 text-center min-h-[120px] flex flex-col justify-center">
                <h3 className="font-semibold mb-1 text-xs text-amber-300">Point Miser</h3>
                <div className="text-sm font-bold text-amber-400">{stats.awards.point_miser.team}</div>
                <div className="text-xs text-purple-200 mt-1">{stats.awards.point_miser.lowest_win} pts</div>
                <div className="text-xs text-purple-400 mt-1 italic">Lowest winning score</div>
              </div>
            )}
            {stats.awards.benchwarmer_mvp && (
              <div className="bg-gradient-to-br from-cyan-900/30 to-cyan-700/30 rounded-lg p-3 border border-cyan-500/50 text-center min-h-[120px] flex flex-col justify-center">
                <h3 className="font-semibold mb-1 text-xs text-cyan-300">Benchwarmer MVP</h3>
                <div className="text-sm font-bold text-cyan-400">{stats.awards.benchwarmer_mvp.player}</div>
                <div className="text-xs text-purple-200 mt-1">{stats.awards.benchwarmer_mvp.bench_points} pts on bench</div>
                <div className="text-xs text-purple-400 mt-1 italic">Should've started him</div>
              </div>
            )}
          </div>
        )}

        {tab === 'help' && (
          <div className="space-y-6">
            <Card title="How Metrics Are Calculated">
              <div className="space-y-3 text-sm">
                <div><strong>Efficiency:</strong> Actual points / Optimal points √ó 100</div>
                <div><strong>Schedule Luck:</strong> Actual wins - Expected wins</div>
                <div><strong>Expected Wins:</strong> How many wins you'd have if you played every team each week</div>
                <div><strong>Strength of Schedule:</strong> Average points scored against you per week</div>
                <div><strong>Consistency:</strong> 100 - (Std Dev / Mean √ó 100)</div>
                <div><strong>Trades:</strong> Points gained - Points lost (through Week 17)</div>
                <div><strong>Waivers:</strong> Players kept through Week 17, never traded</div>
                <div><strong>Steals:</strong> Round 5+ picks with 100+ pts</div>
                <div><strong>Busts:</strong> Rounds 1-3 picks with lowest pts</div>
                <div><strong>Playoffs:</strong> Total points in weeks 15-17</div>
              </div>
            </Card>

            <Card title="Award Definitions">
              <div className="space-y-4 text-sm">
                <div>
                  <div className="font-bold text-yellow-400">MVP Pickup</div>
                  <div className="text-purple-300">Best waiver wire pickup - highest scoring player added via waivers and kept through Week 17</div>
                </div>
                
                <div>
                  <div className="font-bold text-green-400">Draft Steal</div>
                  <div className="text-purple-300">Late round gem - Round 5+ pick who scored 100+ points</div>
                </div>
                
                <div>
                  <div className="font-bold text-red-400">Draft Bust</div>
                  <div className="text-purple-300">Early round disappointment - Rounds 1-3 pick with lowest total points</div>
                </div>
                
                <div>
                  <div className="font-bold text-orange-400">League Taco</div>
                  <div className="text-purple-300">Worst manager - lowest lineup efficiency, left most points on bench all season</div>
                </div>
                
                <div>
                  <div className="font-bold text-blue-400">Consistency King</div>
                  <div className="text-purple-300">Most predictable team - lowest standard deviation in weekly scores</div>
                </div>
                
                <div>
                  <div className="font-bold text-purple-400">Boom/Bust King</div>
                  <div className="text-purple-300">Most volatile team - highest standard deviation, huge highs and brutal lows</div>
                </div>
                
                <div>
                  <div className="font-bold text-indigo-400">Dominance</div>
                  <div className="text-purple-300">Weekly winner - most #1 weekly finishes (highest score that week)</div>
                </div>
                
                <div>
                  <div className="font-bold text-pink-400">Cardiac Kid</div>
                  <div className="text-purple-300">Nail-biter specialist - most wins decided by less than 5 points</div>
                </div>
                
                <div>
                  <div className="font-bold text-rose-400">Heartbreaker</div>
                  <div className="text-purple-300">So close yet so far - most losses by less than 5 points</div>
                </div>
                
                <div>
                  <div className="font-bold text-emerald-400">The Vulture</div>
                  <div className="text-purple-300">Won ugly - most wins while scoring below the league average that week</div>
                </div>
                
                <div>
                  <div className="font-bold text-amber-400">Point Miser</div>
                  <div className="text-purple-300">Barely won - lowest winning score of the season</div>
                </div>
                
                <div>
                  <div className="font-bold text-cyan-400">Benchwarmer MVP</div>
                  <div className="text-purple-300">Should've started him - player with most points scored while sitting on benches league-wide</div>
                </div>
              </div>
            </Card>
          </div>
        )}
      </div>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<FantasyStatsApp />);
    </script>
</body>
</html>
